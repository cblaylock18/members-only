<main>
    <% if (locals.currentUser && locals.messages && locals.messages.length) { %>
    <% locals.messages.forEach((message) => { %>
    <article>
        <h2><%= message.title %></h2>
        <p><%= message.text %></p>
        <% if (currentUser.member) { %>
        <p><%= message.author %></p>
        <p><%= message.created_at %></p>
        <% } else { %>
        <p>The author and timestamp are hidden to non-members!</p>
        <% } %> <% if (currentUser.admin) { %>
        <form action="/messages/delete-message/<%=message.id%>" method="post">
            <button type="submit">Delete Message</button>
        </form>
        <% } %>
    </article>
    <% }); %> <% } else { %>
    <article>
        <h2>Sign up to see messages!</h2>
    </article>
    <% } %>
</main>
